/* Copyright European Organization for Nuclear Research (CERN)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * You may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Authors:
 * - Mario Lassnig, <mario.lassnig@cern.ch>, 2014
 */

/* Generated by preloaders.net
 *
 * preloaders.net Terms of use
 * You are encouraged and legally entitled to copy and modify any
 * animated GIF and APNG images, generated by http://preloaders.net web-site.
 * All animated GIF and APNG images are completely free to use
 * in all projects (web and desktop applications, freeware and commercial projects)
 * You are encouraged, but NOT obligated to place any reference to
 * http://preloaders.net web-site to use it`s content in any projects
 * and applications, WITH THE EXCEPTION of any other animated images generator
 * applications, which must indicate the source of the used image with a
 * visible link to Preloaders.net web-site on one or more pages that
 * is/are linked to from the main page of the web-site that uses the
 * image from Preloaders.net web-application
 * Preloaders.net project reserves the right to refuse service to anyone
 * without any explanation and/or notification
 */

var cWidth=19;
var cHeight=28;
var cTotalFrames=20;
var cFrameWidth=29;
var cImageSrc='/static/spinner.png';

var cImageTimeout=false;
var cIndex=0;
var cXpos=0;
var cPreloaderTimeout=false;
var SECONDS_BETWEEN_FRAMES=1/50

function startSpin() {
    cXpos += cFrameWidth;
    cIndex += 1;
    if (cIndex >= cTotalFrames) { cXpos=0; cIndex=0; }
    if(document.getElementById('loaderImage'))
        document.getElementById('loaderImage').style.backgroundPosition=(-cXpos)+'px 0';
    cPreloaderTimeout=setTimeout('startSpin()', SECONDS_BETWEEN_FRAMES*1000);
}

function stopSpin() {
    document.getElementById('loaderImage').style.backgroundImage='url('+cImageSrc+')';
    document.getElementById('loaderImage').style.width=cWidth+'px';
    document.getElementById('loaderImage').style.height=cHeight+'px';
    clearTimeout(cPreloaderTimeout);
    cPreloaderTimeout=false;
}

function imageLoader(s, fun) {
    clearTimeout(cImageTimeout);
    cImageTimeout=0;
    genImage = new Image();
    genImage.onload=function (){cImageTimeout=setTimeout(fun, 0)};
    genImage.src=s;
}

new imageLoader(cImageSrc, 'stopSpin()');
